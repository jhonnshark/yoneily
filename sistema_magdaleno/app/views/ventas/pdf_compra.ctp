<?phpApp::import('Vendor', 'tcpdf', array('file' => 'xtcpdf.php'));//App::import('Vendor', 'xtcpdf');$tcpdf = new XTCPDF();$textfont = 'freesans'; // looks better, finer, and more condensed than 'dejavusans'$tcpdf->SetAuthor("Muebles de Magdaleno");$tcpdf->SetAutoPageBreak(true, 30);$tcpdf->setHeaderFont(array($textfont, '', 20));$tcpdf->xheadercolor = array(255, 255, 255);$tcpdf->xheadertext = '';$tcpdf->xfootertext = 'Copyright ï¿½ %d Muebles de Magdaleno';// add a page (required with recent versions of tcpdf)$tcpdf->AddPage("P","letter");// Now you position and print your page content// example:$tcpdf->SetTextColor(0, 0, 0);$tcpdf->SetFont($textfont, 'B', 10);$fecha=date('d-m-Y');$html .= '<img src="'.$html->url('/',true).'app/webroot/images/cintillo_pdf.jpg" width="770" height="100" /><br /><br /><br />';$html .='<h2 style="text-align: center; color:black;">Reporte de Compra</h2><br /><br />';$html .='<table style="text-align:right;"><tr><td><h3>Magdaleno, '.$fecha.'</h3></td></tr></table>';$html .='<table><tr><td></td></tr></table>';$html .='<table><tr><td><h3>Informacion del Cliente</h3></td></tr></table>';$html .= '<table border="1" cellpadding="2" width="100%" height="70%">';$html .= '<tr style="text-align: center; background-color: #78e; color: black; font-size: 75%; ">';$html .= '<th>Id</th>';$html .= '<th>Cliente</th>';$html .= '<th>Correo Electr&oacute;nico</th></tr>';$j=1;pr($ventas);if (isset($ventas)) {    $i = 0;    foreach ($ventas as $usuario) {        $style = ' style="text-align: center; font-size: 75%;';            if ($i++ % 2 == 0) {                $style =  $style . ' background-color: #ddd;';            }        $html .= '<tr'. $style .'"><td>' . $j++. '</td>';        $html .= '<td>' . $usuario['Register']['nombreape'] . '</td>';		$html .= '<td>' . $usuario['Register']['correo'] . '</td>';        $html .= '</tr>';    }} else {    $html .= '<tr><td>No se encontraron datos</td></tr>';}$html .= '</table>';$html .='<table><tr></td></td></tr></table>';$html .='<h3>Informacion de la Compra</h3>';$html .= '<table border="1" cellpadding="2" width="100%" height="70%">';$html .= '<tr style="text-align: center; background-color: #78e; color: black; font-size: 75%; ">';$html .= '<th>Producto</th>';$html .= '<th>Cantidad</th>';$html .= '<th>Precio Unitario</th>';$html .= '<th>Total</th>';$html .= '<th>Forma de Pago</th>';$html .= '<th>Numero de Pago</th></tr>';$j=1;//pr($ventas);if (isset($ventas)) {    $i = 0;    foreach ($ventas as $usuario) {        $style = ' style="text-align: center; font-size: 75%;';            if ($i++ % 2 == 0) {                $style =  $style . ' background-color: #ddd;';            }        $html .= '<tr'. $style .'">';		if(!empty($usuario['Promo']['texto_promo'])){        $html .= '<td>' . $usuario['Promo']['texto_promo'] . '</td>';		}else if(!empty($usuario['Gallery']['texto_galeria'])){        $html .= '<td>' . $usuario['Gallery']['texto_galeria'] . '</td>';		}		$html .= '<td>' . $usuario['Venta']['cantidad'] . '</td>';		if(!empty($usuario['Promo']['precio'])){        $html .= '<td>' . $usuario['Promo']['precio'] . '</td>';		}else if(!empty($usuario['Gallery']['precio'])){        $html .= '<td>' . $usuario['Gallery']['precio'] . '</td>';		}		if(!empty($usuario['Promo']['texto_promo'])){        $html .= '<td>' . $usuario['Promo']['precio'] * $usuario['Venta']['cantidad'] . ' Bs. F</td>';		}else if(!empty($usuario['Gallery']['precio'])){        $html .= '<td>' . $usuario['Gallery']['precio'] * $usuario['Venta']['cantidad'] . ' Bs. F</td>';		}		$html .= '<td>' . $usuario['Venta']['forma_pago'] . '</td>';		$html .= '<td>' . $usuario['Venta']['numero_pago'] . '</td>';        $html .= '</tr>';    }} else {    $html .= '<tr><td>No se encontraron datos</td></tr>';}$html .= '</table>';// output the HTML content$tcpdf->writeHTML($html, true, false, true, false, '');echo $tcpdf->Output('datos_de_compra_'.$usuarios['Register']['nombreape'] . '.pdf', 'D');?>